import"../chunks/DsnmJJEf.js";import"../chunks/BYui9kYh.js";import{o as l}from"../chunks/BWHUfV-9.js";import{p as m,f as _,b as g,c as w,d as v,r as b}from"../chunks/CiTjGTXK.js";import{e as y}from"../chunks/DLdq7FL_.js";import{i as k}from"../chunks/CfwyDKc0.js";import{s as $,a as z,g as c,i as A}from"../chunks/BXlmEFWj.js";async function L(e,a){const o=await fetch(e),n=o.headers.get("Authorization");if(n){const i=n.replace("Bearer ","");$(i)}return o}async function U(){return z(),await(await L(`${c()}/user_info`)).json()}var j=_("<div><button>登录</button></div>");function D(e,a){m(a,!1);function o(){return window.crypto.randomUUID()}function n(){if(!A)return;const t=["width=640","height=800","left=100","top=100","popup=yes"].join(","),d=`${c()}/auth/github_authorization`,f=o(),h="Iv23li5ddAgUBsPLMdVi";addEventListener("message",i),window.open(`https://github.com/login/oauth/authorize?client_id=${h}&redirect_uri=${d}&state=${f}`,"_blank",t)}function i(t){t.data.type==="authenticated"?console.log("认证成功"):console.log("认证失败：",t.data.error_code,t.data.error),removeEventListener("message",i)}let s=null;async function u(){s=await U(),console.log(s,";;;;;;;;;;;;;")}l(()=>{u()}),k();var r=j(),p=v(r);b(r),y("click",p,n),g(e,r),w()}export{D as component};
