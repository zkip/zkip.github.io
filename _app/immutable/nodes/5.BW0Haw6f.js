import"../chunks/DsnmJJEf.js";import"../chunks/BYui9kYh.js";import{o as h}from"../chunks/BWHUfV-9.js";import{p as l,f as m,b as g,c as _,d as w,r as b}from"../chunks/CiTjGTXK.js";import{e as v}from"../chunks/DLdq7FL_.js";import{i as y}from"../chunks/CfwyDKc0.js";import{s as k,a as $,g as z,i as A,b as H}from"../chunks/CL3qtmpU.js";async function L(e,r){const o=await fetch(e),n=o.headers.get("Authorization");if(n){const a=n.replace("Bearer ","");k(a)}return o}async function U(){return $(),await(await L(`${z()}/user_info`)).json()}var j=m("<div><button>登录</button></div>");function D(e,r){l(r,!1);function o(){return window.crypto.randomUUID()}function n(){if(!A)return;const t=["width=640","height=800","left=100","top=100","popup=yes"].join(","),p=`${H()}/auth/github_authorization`,d=o(),f="Iv23li5ddAgUBsPLMdVi";addEventListener("message",a),window.open(`https://github.com/login/oauth/authorize?client_id=${f}&redirect_uri=${p}&state=${d}`,"_blank",t)}function a(t){t.data.type==="authenticated"?console.log("认证成功"):console.log("认证失败：",t.data.error_code,t.data.error),removeEventListener("message",a)}let s=null;async function c(){s=await U(),console.log(s,";;;;;;;;;;;;;")}h(()=>{c()}),y();var i=j(),u=w(i);b(i),v("click",u,n),g(e,i),_()}export{D as component};
